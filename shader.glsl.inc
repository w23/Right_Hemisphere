; File generated with Shader Minifier 1.1.4
; http://www.ctrl-alt-test.fr
_var_FADE: db 'v', 0
_var_DISTORT: db 'n', 0
_var_GREYSCALE: db 'x', 0
_var_GREYSCALE2: db 'f', 0
_var_RED: db 'c', 0
_var_SHIFT11: db 'm', 0
_var_SHIFTX: db 'a', 0
_var_SHIFTY: db 'e', 0
_var_SKIP: db 'g', 0
_var_STEPS: db 'i', 0
_var_T: db 'y', 0
_var_TIMESHIFT: db 'l', 0
_var_ZOOMXY: db 'k', 0
_var_ZOOMSHIFT: db 'z', 0

_shader_glsl:
	db 'uniform float y,v,m,z,i,x,f,l,a,e,k,c,g,n;'
	db 'vec3 r[16];'
	db 'float s;'
	db 'vec3 p(vec3 y,vec3 i)'
	db '{'
	db   'vec3 v=sin(i),l=cos(i);'
	db   'return y*mat3(l.y,v.z*v.y,-v.y*l.z,-v.x*v.y,l.x*l.z+v.x*v.z*l.y,v.z*l.x-v.x*l.z*l.y,l.x*v.y,v.x*l.z-l.x*v.z*l.y,v.z*v.x+l.x*l.z*l.y);'
	db '}'
	db 'vec3 p(float y,float v,float z)'
	db '{'
	db   'return vec3(y*4.-2.,v*4.-2.,z*4.-2.);'
	db '}'
	db 'float t(vec3 v,vec3 r)'
	db '{'
	db   'vec3 i,f,z=vec3(.5,.5,.001);'
	db   'f=r;'
	db   'r.z=(r.z+s)*4.;'
	db   'i=v-r;'
	db   'i=p(i,(y+l)/29.*f);'
	db   'f=max(i-z,-i-z);'
	db   'return max(max(f.x,f.y),f.z);'
	db '}'
	db 'void main()'
	db '{'
	db   's=z+smoothstep(120.,180.,y+l)*.6-smoothstep(240.,300.,y+l);'
	db   'r[0]=p(.044677,.928527,.337524);'
	db   'r[1]=p(.520019,.026367,.486328);'
	db   'r[2]=p(.026125,.984497,.337249);'
	db   'r[3]=p(.635498,.42041,.41748);'
	db   'r[4]=p(.558349,.929687,.849609);'
	db   'r[5]=p(.840576,.539917,.436889);'
	db   'r[6]=p(.096557,.049438,.537475);'
	db   'r[7]=p(.439819,.906127,.853759);'
	db   'r[8]=p(.291748,.75415,.479736);'
	db   'r[9]=p(.572753,.774047,.402343);'
	db   'r[10]=p(.565551,.614624,.542602);'
	db   'r[11]=p(.279052,.261779,.26455);'
	db   'r[12]=p(.62207,.145751,.537809);'
	db   'r[13]=p(.846801,.8208,.397094);'
	db   'r[14]=p(.905029,.469421,.400512);'
	db   'r[15]=p(.725585,.835769,.054077);'
	db   'r[11]-=m/vec3(70.,110.,-180.);'
	db   'float b,o,u,h=.0001,d,F=.00015;'
	db   'vec3 C,Z=vec3(0.),Y,X,W,V,U,T=vec3(.5,.5,.001),S=vec3(0.,0.,0.),R=vec3(h,0.,0.),Q=vec3(0.,h,0.),P=vec3(0.,0.,h);'
	db   'for(int O=0;O<3;O++)'
	db     '{'
	db       'd=.00015;'
	db       'for(int N=0;N<3;N++)'
	db         '{'
	db           'vec2 M=(gl_FragCoord.xy/vec2(1920.,1080.)+vec2(d,F)+vec2(a,e))/vec2(1.,16./9.)*k;'
	db           'b=1.;'
	db           'C=normalize(vec3(M,1.));'
	db           'for(int L=0;L<5;L++)'
	db             '{'
	db               'if(L>=int(i))'
	db                 'break;'
	db               'o=26.;'
	db               'for(int K=0;K<15;K++)'
	db                 'if(K!=int(g))'
	db                   'Y=r[K],Y.z=(Y.z+s)*4.,o=min(o,length(C*b-Y)-.71);'
	db               'if(o<h)'
	db                 'break;'
	db               'b+=o;'
	db               'if(b>26.)'
	db                 'break;'
	db             '}'
	db           'if(b<26.)'
	db             '{'
	db               'if(mod(M.y,.08)<.04)'
	db                 'b-=n;'
	db               'C*=b;'
	db               'o=26.;'
	db               'for(int K=0;K<15;K++)'
	db                 '{'
	db                   'Y=r[K];'
	db                   'V=Y;'
	db                   'W=Y;'
	db                   'Y.z=(Y.z+s)*4.;'
	db                   'X=C-Y;'
	db                   'X=p(X,(y+l)/29.*W);'
	db                   'W=max(X-T,-X-T);'
	db                   'u=max(max(W.x,W.y),W.z);'
	db                   'if(u<o)'
	db                     'o=u,U=V;'
	db                 '}'
	db               'S=normalize(vec3(t(C+R,U)-t(C-R,U),t(C+Q,U)-t(C-Q,U),t(C+P,U)-t(C-P,U)));'
	db             '}'
	db           'Y=vec3(S.xy,vec3(1.-b/20.));'
	db           'Y.z+=Y.y/2.;'
	db           'Y.y=Y.y+Y.x;'
	db           'Z+=clamp(Y,0.,1.);'
	db           'd+=.0003;'
	db         '}'
	db       'F+=.0003;'
	db     '}'
	db   'Z/=9.;'
	db   'Z=(1.-x)*Z+vec3(Z.x+Z.z*f)*x;'
	db   'Z.xz+=c*vec2(abs(S.y),Z.z/3.);'
	db   'gl_FragColor=vec4(Z*v,1.);'
	db '}', 0

